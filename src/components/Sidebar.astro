---
import SignOutIcon from "@/icons/Signout.astro";
import AsideItem from "./AsideItem.astro";
---

<aside
  id="sidebar"
  class="fixed top-0 left-0 z-40 w-52 h-screen pt-20 transition-transform -translate-x-full bg-slate-100 border-r border-gray-200 lg:translate-x-0 dark:bg-gray-800 dark:border-gray-700"
  aria-label="Sidebar"
>
  <div class="h-full px-3 pb-4 overflow-y-auto bg-slate-100 dark:bg-gray-800">
    <ul class="space-y-2 font-medium">
      <p class="text-sm text-gray-900/70 dark:text-gray-50/50">
        Administración
      </p>
      <AsideItem />
      <a
        href="/login"
        class="flex items-center p-2 absolute bottom-0 text-gray-900 rounded-lg dark:text-white group"
      >
        <SignOutIcon
          class="text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white"
        />
        <span class="ms-3">Cerrar Sesión</span>
      </a>
    </ul>
  </div>
</aside>

<div
  class="fixed inset-0 z-10 hidden bg-gray-900/50 dark:bg-gray-900/90"
  id="sidebarBackdrop"
>
</div>

<script>
  document.addEventListener("astro:page-load", () => {
    const sidebar = document.getElementById("sidebar");

    if (sidebar) {
      const toggleSidebarMobile = (
        sidebar: HTMLElement,
        sidebarBackdrop: HTMLElement,
        toggleSidebarMobileHamburger: HTMLElement,
        toggleSidebarMobileClose: HTMLElement
      ) => {
        sidebar.classList.toggle("-translate-x-full");
        sidebarBackdrop.classList.toggle("hidden");
        toggleSidebarMobileHamburger.classList.toggle("hidden");
        toggleSidebarMobileClose.classList.toggle("hidden");
      };

      const toggleSidebarMobileEl = document.getElementById(
        "toggleSidebarMobile"
      );
      const sidebarBackdrop = document.getElementById("sidebarBackdrop")!;

      const toggleSidebarMobileHamburger = document.getElementById(
        "toggleSidebarMobileHamburger"
      )!;
      const toggleSidebarMobileClose = document.getElementById(
        "toggleSidebarMobileClose"
      )!;

      toggleSidebarMobileEl?.addEventListener("click", () => {
        toggleSidebarMobile(
          sidebar,
          sidebarBackdrop,
          toggleSidebarMobileHamburger,
          toggleSidebarMobileClose
        );
      });

      sidebarBackdrop?.addEventListener("click", () => {
        toggleSidebarMobile(
          sidebar,
          sidebarBackdrop,
          toggleSidebarMobileHamburger,
          toggleSidebarMobileClose
        );
      });
    }
  });
</script>
